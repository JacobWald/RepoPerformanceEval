{% extends "analytics/base.html" %}
{% load static %}

{% block title %}My Analyses{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'styles/my_analyses.css' %}">
<h1>My Analyses</h1>

{% if analyses %}
  <div class="analysis-list">
    {% for a in analyses %}
      <div
        class="analysis-card"
        data-url="{% url 'analysis_dashboard' analysis_id=a.id %}"
        onclick="window.location.href=this.dataset.url"
      >
        <div class="analysis-card-left">
          <div class="analysis-repo-name">{{ a.repository.name }}</div>
          <div class="analysis-meta">
            <span class="analysis-mined-label">Mined:</span>
            <span class="analysis-mined-at">{{ a.mined_at }}</span>
          </div>
        </div>

        <div class="analysis-card-right">
          <a
            class="analysis-json-pill"
            href="{% url 'analysis_refresh' analysis_id=a.id %}"
            onclick="event.stopPropagation();"
          >
            Refresh Analysis
          </a>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No analyses yet. Run one from <a href="{% url 'home' %}">Home</a>.</p>
{% endif %}

{% endblock %}
